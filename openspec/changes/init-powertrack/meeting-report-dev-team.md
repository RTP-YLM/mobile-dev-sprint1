# üìã ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏ó‡∏µ‡∏° Dev - ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ HomeSync

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°:** 6 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2026  
**‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°:** ‡∏ö‡∏µ‡∏° (Mobile Lead), ‡∏ï‡πâ‡∏ô (Backend), ‡∏ü‡∏•‡∏∏‡πä‡∏Ñ (DevOps), ‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå (QA)  
**‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:** Assistant ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≤‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£  

---

## 1. ‡∏™‡∏£‡∏∏‡∏õ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ (Project Summary)

### ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡∏°

**HomeSync** ‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡πà‡∏ô Smart Home + Energy Monitoring ‡∏ó‡∏µ‡πà‡∏°‡∏µ Core Value ‡∏Ñ‡∏∑‡∏≠:
1. **Real-time Energy Monitoring** - Monitor ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ real-time ‡∏ú‡πà‡∏≤‡∏ô Shelly devices
2. **Smart Device Control** - ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå on/off/dim ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÅ‡∏≠‡∏û
3. **Intelligent Automation** - ‡∏™‡∏£‡πâ‡∏≤‡∏á IFTTT rules ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
4. **Unified Dashboard** - ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞ control ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
5. **Energy-Saving Automation** - Automation ‡∏ó‡∏µ‡πà focus ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô

### Key Features ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥ (MVP)
| Feature | Status | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô |
|---------|--------|-------------|
| Real-time Monitoring (W, V, A, kWh) | In Scope | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |
| Device Control (On/Off) | **NEW** | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |
| Dimming Control | **NEW** | ‡∏ï‡πà‡∏≥ |
| Scheduling (Time-based) | **NEW** | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |
| Automation Rules (IFTTT) | **NEW** | **‡∏™‡∏π‡∏á** |
| Scenes (Multi-device preset) | **NEW** | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |
| Historical Data & Charts | In Scope | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |
| Cost Calculation & Budget | In Scope | ‡∏ï‡πà‡∏≥ |
| Alerts & Notifications | In Scope | ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á |

### User Personas ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
1. **The Saver** - ‡∏Ñ‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏ü (Focus: monitoring, budget alerts)
2. **The Tech Enthusiast** - ‡∏Ñ‡∏ô‡∏ä‡∏≠‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ (Focus: automation, scenes)
3. **The Estate Manager** - ‡∏Ñ‡∏ô‡∏°‡∏µ‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà (Focus: multi-room control)

### ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡∏°‡∏°‡∏µ‡∏ï‡πà‡∏≠ PM
- **Q1:** Automation rules ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏µ‡πà rules ‡∏ï‡πà‡∏≠ user? (‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏∏ 100 rules/user ‡πÉ‡∏ô MVP)
- **Q2:** Scene ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏µ‡πà scenes ‡∏ï‡πà‡∏≠ user?
- **Q3:** Schedule ‡∏°‡∏µ limit ‡πÑ‡∏´‡∏°? (‡∏ó‡∏±‡πâ‡∏á one-time ‡πÅ‡∏•‡∏∞ recurring)
- **Q4:** ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö devices ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß‡∏ï‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô?
- **Q5:** Multi-user support (family sharing) ‡πÄ‡∏õ‡πá‡∏ô Phase 2 ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?
- **Q6:** ‡∏°‡∏µ devices ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏° test ‡πÑ‡∏´‡∏°? (‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠ Shelly Plug S ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß)

---

## 2. Feasibility Assessment (‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ)

### 2.1 Mobile (‡∏ö‡∏µ‡∏° - Flutter)

#### ‚úÖ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ / Feasible
| Aspect | Assessment | Details |
|--------|------------|---------|
| **BLoC Pattern** | ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏î‡∏µ | ‡πÉ‡∏ä‡πâ flutter_bloc ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ real-time state ‡πÑ‡∏î‡πâ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö stream ‡∏à‡∏≤‡∏Å MQTT |
| **MQTT Client** | ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö | ‡πÉ‡∏ä‡πâ `mqtt_client` library ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö publish commands ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå |
| **Real-time Updates** | ‚úÖ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ | Stream-based architecture ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ update UI ‡πÅ‡∏ö‡∏ö real-time |
| **Chart Rendering** | ‚úÖ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ | fl_chart ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö live chart, zoom/pan ‡πÑ‡∏î‡πâ |
| **Offline Support** | ‚úÖ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ | sqflite ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö caching ‡πÅ‡∏•‡∏∞ sync queue |

#### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Å‡∏±‡∏á‡∏ß‡∏• / Concerns
1. **Rule Builder UI** - ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ library ‡πÄ‡∏û‡∏¥‡πà‡∏° (‡πÄ‡∏ä‡πà‡∏ô `flutter_flow_chart` ‡∏´‡∏£‡∏∑‡∏≠ `graphview`) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö visual automation builder
2. **Complex State Management** - Automation/Schedule/Scene ‡∏°‡∏µ state ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏≤‡∏á BLoC structure ‡∏î‡∏µ‡πÜ
3. **Performance** - Chart ‡∏ó‡∏µ‡πà‡∏°‡∏µ data points ‡∏°‡∏≤‡∏Å‡πÜ ‡∏ï‡πâ‡∏≠‡∏á optimize (downsampling)
4. **Testing** - Real-time features ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ integration testing ‡∏ó‡∏µ‡πà‡∏î‡∏µ

#### üìä Estimates
- **Phase 1 (Foundation):** 80 ‡∏ä‡∏°. - 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
- **Phase 2 (Core):** 92 ‡∏ä‡∏°. - 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
- **Phase 3-6 (Features):** 196 ‡∏ä‡∏°. - 4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
- **Phase 7-8 (Testing+Deploy):** 124 ‡∏ä‡∏°. - 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
- **‡∏£‡∏ß‡∏°:** ~492 ‡∏ä‡∏°. (~3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 1 Flutter dev, ‡∏•‡∏î‡∏•‡∏á‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ 2 ‡∏Ñ‡∏ô)

---

### 2.2 Backend (‡∏ï‡πâ‡∏ô - Node.js)

#### ‚úÖ ‡∏ó‡∏≥‡πÑ‡∏î‡πâ / Feasible
| Component | Assessment | Details |
|-----------|------------|---------|
| **Architecture** | ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏î‡∏µ | Clean Architecture ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö command flow, automation engine ‡πÑ‡∏î‡πâ |
| **API Endpoints** | ‚úÖ ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô | ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° endpoints ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö automation, schedule, scene |
| **Database Schema** | ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö | PostgreSQL schema ‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö scheduling/automation ‡πÅ‡∏•‡πâ‡∏ß |
| **Automation Engine** | ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà | ‡πÑ‡∏°‡πà‡∏°‡∏µ library ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏û‡∏≠‡∏î‡∏µ ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á |
| **MQTT Integration** | ‚úÖ ‡∏°‡∏µ‡∏û‡∏£‡πâ‡∏≠‡∏° | ‡πÉ‡∏ä‡πâ `mqtt` library ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö pub/sub commands |

#### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Å‡∏±‡∏á‡∏ß‡∏• / Concerns
1. **Automation Engine Complexity** - ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á rule evaluation engine ‡πÄ‡∏≠‡∏á ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á:
   - Trigger monitoring (device state, power threshold, time, schedule)
   - Condition evaluation (AND/OR logic)
   - Action execution with cooldown, retry logic
   - Conflict resolution
2. **Schedule Executor** - ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ `node-cron` ‡∏´‡∏£‡∏∑‡∏≠ `Bull Queue` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö cron jobs
3. **Scene Execution** - ‡∏ï‡πâ‡∏≠‡∏á handle sequential commands, partial failures
4. **Technical Debt Risk** - Automation engine ‡∏ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏î‡∏µ ‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô legacy ‡πÄ‡∏£‡πá‡∏ß

#### üìä Backend API Endpoints ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°
```
# Automation
POST   /api/v1/automations
GET    /api/v1/automations
PUT    /api/v1/automations/:id
DELETE /api/v1/automations/:id
POST   /api/v1/automations/:id/test
GET    /api/v1/automations/:id/history

# Schedules
POST   /api/v1/schedules
GET    /api/v1/schedules
PUT    /api/v1/schedules/:id
DELETE /api/v1/schedules/:id

# Scenes
POST   /api/v1/scenes
GET    /api/v1/scenes
PUT    /api/v1/scenes/:id
DELETE /api/v1/scenes/:id
POST   /api/v1/scenes/:id/activate

# Commands
POST   /api/v1/devices/:id/command
GET    /api/v1/commands/queue
```

---

### 2.3 DevOps (‡∏ü‡∏•‡∏∏‡πä‡∏Ñ)

#### ‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏° / Ready
| Component | Recommendation | Cost Estimate |
|-----------|----------------|---------------|
| **MQTT Broker** | EMQX (Prod) / Mosquitto (Dev) | EMQX Cloud: ~$20-50/month |
| **Backend Hosting** | AWS ECS / GCP Cloud Run | ~$30-80/month |
| **Database** | RDS PostgreSQL + InfluxDB Cloud | ~$50-150/month |
| **Redis** | ElastiCache / Redis Cloud | ~$20-50/month |
| **CI/CD** | GitHub Actions + Codemagic | ~$0-50/month |

#### ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Å‡∏±‡∏á‡∏ß‡∏• / Concerns
1. **MQTT Broker Scaling** - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡πà‡∏≠ MQTT broker ‡∏ï‡πâ‡∏≠‡∏á plan scaling ‡∏î‡∏µ‡πÜ
2. **EMQX vs Mosquitto** - EMQX ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö clustering ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ ‡πÅ‡∏ï‡πà‡πÅ‡∏û‡∏á‡∏Å‡∏ß‡πà‡∏≤
3. **InfluxDB** - Time-series data ‡∏à‡∏∞‡πÄ‡∏¢‡∏≠‡∏∞‡∏°‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á plan retention policy
4. **Security** - MQTT ACL, TLS certificates ‡∏ï‡πâ‡∏≠‡∏á setup ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö

#### üí∞ Cost Estimate (Monthly)
| Environment | Estimated Cost |
|-------------|----------------|
| **Development** | ~$50-100 |
| **Staging** | ~$100-200 |
| **Production** | ~$300-500 (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô) |

---

### 2.4 QA (‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå)

#### ‚úÖ Test Strategy
| Type | Approach | Tools |
|------|----------|-------|
| **Unit Tests** | BLoC testing, Service testing | flutter_test, jest |
| **Widget Tests** | UI component testing | flutter_test |
| **Integration Tests** | API, MQTT, Database | integration_test, postman |
| **E2E Tests** | Full user flows | Maestro / Appium |

#### ‚ö†Ô∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
1. **Real-time Features** - ‡∏ï‡πâ‡∏≠‡∏á mock MQTT broker ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ test broker
2. **Automation Rules** - ‡∏ï‡πâ‡∏≠‡∏á test time-based triggers, ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á
3. **Device Control** - ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ test devices ‡∏à‡∏£‡∏¥‡∏á ‡∏´‡∏£‡∏∑‡∏≠ mock device responses
4. **Offline/Online Sync** - ‡∏ï‡πâ‡∏≠‡∏á test network interruption scenarios

#### üîß Test Infrastructure ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ
- Test MQTT Broker (‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å Production)
- Mock Shelly devices (‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏£‡∏¥‡∏á 3-5 ‡∏ï‡∏±‡∏ß)
- CI pipeline ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö automated testing

---

## 3. Technical Clarifications (‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≤‡∏° PM ‡πÄ‡∏û‡∏¥‡πà‡∏°)

### 3.1 Scope & Limitations
| # | Question | Impact |
|---|----------|--------|
| 1 | Automation rules ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏µ‡πà rules ‡∏ï‡πà‡∏≠ user? | Affects database design |
| 2 | Scene ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏µ‡πà scenes ‡∏ï‡πà‡∏≠ user? | Affects local storage |
| 3 | Schedule ‡∏°‡∏µ limit ‡πÑ‡∏´‡∏°? | Affects cron job scaling |
| 4 | Devices ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß‡∏ï‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô? | Affects MQTT topic management |
| 5 | Multi-user/family sharing ‡πÄ‡∏õ‡πá‡∏ô Phase 2 ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°? | Affects auth model |

### 3.2 Business Requirements
| # | Question | Impact |
|---|----------|--------|
| 6 | ‡∏°‡∏µ SLA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö automation execution ‡πÑ‡∏´‡∏°? (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 10 ‡∏ß‡∏¥) | Affects architecture |
| 7 | Scene activation ‡∏ï‡πâ‡∏≠‡∏á atomic ‡πÑ‡∏´‡∏°? (‡∏ó‡∏≥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÄ‡∏•‡∏¢) | Affects implementation |
| 8 | Schedule ‡∏ñ‡πâ‡∏≤ device offline ‡∏ï‡πâ‡∏≠‡∏á retry ‡∏ô‡∏≤‡∏ô‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô? | Affects queue design |
| 9 | Automation ‡∏ñ‡πâ‡∏≤ trigger ‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡πÜ ‡∏ï‡πâ‡∏≠‡∏á throttle ‡πÑ‡∏´‡∏°? | Affects rate limiting |

### 3.3 Hardware & Testing
| # | Question | Impact |
|---|----------|--------|
| 10 | ‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠ Shelly Plug S ‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev/testing? | Budget |
| 11 | ‡∏°‡∏µ budget ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö cloud infrastructure ‡πÑ‡∏´‡∏°? | Cost planning |
| 12 | ‡∏ï‡πâ‡∏≠‡∏á support devices ‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏≠‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Shelly ‡πÑ‡∏´‡∏°? | Compatibility layer |

---

## 4. Risk & Concerns (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡∏°‡πÄ‡∏´‡πá‡∏ô)

### üî¥ High Risk
| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| **Automation Engine Complexity** | High | High | ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å simple rules ‡∏Å‡πà‡∏≠‡∏ô, ‡πÉ‡∏ä‡πâ library ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ |
| **MQTT Connection Stability** | High | High | Auto-reconnect, fallback polling |
| **Device Control Latency** | Medium | High | Optimistic UI, local network priority |

### üü° Medium Risk
| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| **Real-time Chart Performance** | Medium | Medium | Data downsampling, lazy loading |
| **Schedule Execution Reliability** | Medium | High | Bull Queue, retry logic |
| **Multi-device Scene Execution** | Medium | Medium | Sequential commands, timeout handling |

### üü¢ Low Risk
| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| **Mobile Battery Consumption** | Medium | Low | Optimize MQTT keep-alive |
| **Cost Calculation Accuracy** | Medium | Medium | Manual override option |

---

## 5. Recommendation (‡∏Ç‡πâ‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡∏°)

### ‚úÖ ‡∏ó‡∏µ‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: **GO** (with adjustments)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ HomeSync **‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á** ‡πÅ‡∏•‡∏∞‡∏°‡∏µ market potential ‡∏î‡∏µ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö scope ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô:

### üîß Recommended Adjustments
1. **Automation Engine:** ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å simple rules ‡∏Å‡πà‡∏≠‡∏ô (IFTTT basic) ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á complex conditions ‡πÉ‡∏ô MVP
2. **Schedule:** ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö basic recurring (daily, weekdays) ‡∏Å‡πà‡∏≠‡∏ô ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á complex conditions
3. **Scene:** ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å instant activation ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á delayed actions ‡πÉ‡∏ô MVP
4. **Device Support:** Focus Shelly ‡∏Å‡πà‡∏≠‡∏ô ‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏≠‡∏∑‡πà‡∏ô Phase 2

### üìÖ Suggested Timeline Adjustment
- **Original:** 11 weeks (492 hours)
- **Recommended:** 12-13 weeks ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ:
  - Flutter: 1-2 ‡∏Ñ‡∏ô
  - Backend: 1-2 ‡∏Ñ‡∏ô
  - DevOps: 0.5 ‡∏Ñ‡∏ô (shared)
  - QA: 1 ‡∏Ñ‡∏ô

---

## 6. Action Items (‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° Sprint 1)

### ‡∏ö‡∏µ‡∏° (Mobile Lead - Flutter)
| # | Task | Due Date |
|---|------|----------|
| 1 | Setup Flutter project structure (Clean Architecture) | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 2 | Research `flutter_flow_chart` ‡∏´‡∏£‡∏∑‡∏≠ library ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö rule builder UI | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 3 | ‡∏™‡∏£‡πâ‡∏≤‡∏á Design System components ‡∏ï‡∏≤‡∏° UI spec | Week 1 |
| 4 | Setup MQTT client service + BLoC pattern | Week 1-2 |
| 5 | ‡∏ó‡∏≥ POC ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time chart | Week 2 |

### ‡∏ï‡πâ‡∏ô (Backend Developer)
| # | Task | Due Date |
|---|------|----------|
| 1 | Setup Node.js project + PostgreSQL + InfluxDB | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 2 | ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Automation Engine architecture (‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î) | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 3 | Setup MQTT Bridge service | Week 1 |
| 4 | Implement core API (Auth, Devices, Readings) | Week 1-2 |
| 5 | Research `node-cron` vs `Bull Queue` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö scheduling | Week 2 |

### ‡∏ü‡∏•‡∏∏‡πä‡∏Ñ (DevOps)
| # | Task | Due Date |
|---|------|----------|
| 1 | Setup development environment (Docker Compose) | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 2 | Setup Git repository + CI/CD pipeline (GitHub Actions) | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 3 | Setup MQTT Broker (Mosquitto) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev | Week 1 |
| 4 | ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô cost ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö staging/production | Week 2 |
| 5 | Setup monitoring stack (Grafana/Prometheus) | Week 3 |

### ‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå (QA)
| # | Task | Due Date |
|---|------|----------|
| 1 | ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Test Plan ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö real-time features | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 2 | Research test automation tools (Maestro/Appium) | ‡∏Å‡πà‡∏≠‡∏ô Sprint 1 |
| 3 | Setup test MQTT broker | Week 1 |
| 4 | ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Test Cases ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Phase 1 | Week 1-2 |
| 5 | ‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠ Shelly Plug S ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö testing (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏•‡∏á) | Week 2 |

### PM (‡∏Å‡∏∏‡πâ‡∏á)
| # | Task | Due Date |
|---|------|----------|
| 1 | ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° Technical Clarifications ‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô | ASAP |
| 2 | ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô budget ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö infrastructure | Week 1 |
| 3 | ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô budget ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Shelly devices (test) | Week 1 |
| 4 | ‡∏à‡∏±‡∏î‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß architecture ‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡∏° | Week 2 |

---

## 7. Hardware Requirements (‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠)

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development & Testing
| Item | Quantity | Est. Cost (THB) | Note |
|------|----------|-----------------|------|
| Shelly Plug S | 5-8 ‡∏ï‡∏±‡∏ß | ~6,000-10,000 | Test devices |
| WiFi Router (‡πÅ‡∏¢‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev) | 1 | ~2,000 | Isolate test network |
| Raspberry Pi (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö test MQTT) | 1-2 | ~3,000 | Local broker testing |
| **‡∏£‡∏ß‡∏°** | | **~11,000-15,000** | |

---

## 8. Infrastructure ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á Setup ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°

### Development Environment
- [ ] Docker Compose with: PostgreSQL, InfluxDB, Redis, Mosquitto
- [ ] Git repository with branch protection
- [ ] CI/CD pipeline (GitHub Actions)
- [ ] Test MQTT Broker

### Staging Environment
- [ ] AWS/GCP account
- [ ] EMQX or Mosquitto broker
- [ ] RDS PostgreSQL
- [ ] InfluxDB Cloud
- [ ] Redis ElastiCache

---

## ‡∏™‡∏£‡∏∏‡∏õ

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ HomeSync ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ó‡∏µ‡πà‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‡∏ó‡∏µ‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á Automation Engine ‡πÅ‡∏•‡∏∞ Schedule System ‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏´‡∏•‡∏±‡∏Å:**
1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å MVP scope ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
2. ‡∏ó‡∏≥ POC ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö automation engine ‡∏Å‡πà‡∏≠‡∏ô
3. ‡∏°‡∏µ test devices ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô
4. ‡∏ß‡∏≤‡∏á architecture ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö scaling ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

**‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏° Sprint 1 ‡πÄ‡∏°‡∏∑‡πà‡∏≠:**
- ‡πÑ‡∏î‡πâ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö Technical Clarifications ‡∏à‡∏≤‡∏Å PM
- Setup development environment ‡πÄ‡∏™‡∏£‡πá‡∏à
- ‡∏°‡∏µ Shelly devices ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

---

*‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢: Assistant*  
*‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 6 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2026*
